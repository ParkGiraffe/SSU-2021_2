## SKT AI 커리큘럼 - 자연어 이해

자연어 이해(NLU, Natural Language Understanding)는 인간의 언어에서 패턴과 의미를 인식하는 데 중점을 둔 AI 기술입니다.  
기계는 자연어 이해를 통해 화자의 말 뿐만 아니라 실제로 의미하는 바를 추론할 수 있습니다.  

이를 통해 사전 입력된 표현을 사용하지 않아도 자연스럽게 대화를 나누는 것처럼 작동합니다.  

  

  

  

## 1강 자연어 이해 기술이란?

### 자연어 이해 기술 : 기계가 사람의 말을 이해할 수 있도록 하는 기술

![](./0446b294-0483-4d95-883e-ce678070e5cf.jpg)  

  

  

###  자연어 이해 기술의 목적 : 가장 인간 같은 기계 

튜링테스트

![](./33dc4463-563f-46f6-a8fe-b1b1b4cbf0ea.jpg)  

둘 중 누가 진짜 여성인지를 맞추는 것

  

→ 

![](./dbd883b9-2032-447f-937b-f1547fce9938.jpg)  

기계를 여성이라고 답하면, 그 기계는 인공지능

  

  

튜링테스트 통과 + 발전 중인 챗봇

![](./78afba74-5cc4-4cb6-b848-0e9333a1a979.jpg)  

  

  

  

![](./dcaa1988-40e1-4835-a57e-6c15c550d313.jpg)  

  

  

  

  

### 사람이 하는 말로 기계의 도움을 받을 수 있을까?

![](./26f5c9ff-02bd-4b62-93b1-22c2c6660c2e.jpg)  

  

  

응용사례

![](./c671c775-4228-4365-a0d8-9f8c921833f8.jpg)  

![](./c93f2c31-4272-40a1-9a94-043b962b23b8.jpg)  

  

  

자연어 인터페이스의 대표적인 사용처는 ai 스피커

### 가상 개인 비서의 할 일

![](./f97a135f-8b87-4040-8bfe-2767cd816dba.jpg)  

- 원하는 일을 해줌
- 무엇을 말하는 것인지 이해하고 서비스 제공
- 개인적인 정보를 알고, 그 사람이 아는 선에서 서비스 제공

  

  

### 요약 

![](./e52ddb2a-9d73-470a-ab68-b202d9099a00.jpg)  

  

  

## 2강 자연어의 특징

### 자연어 분석 단계

![](./d37c96ac-131d-402a-95e4-140c748e3836.jpg)  

  

- 구문론 

![](./23e9f3b4-859a-4258-a779-94d2e6d46079.jpg)  

동일한 의미이나 구조가 다름.

  

  

- 의미론

![](./e7488c4d-fe05-4008-874a-20de8dc5dd82.jpg)  

![](./f573774f-06c4-4e21-a13a-5efd9adfd00a.jpg)  

 문장의 구조가 같으나 의미가 다름   

넓이를 다루는 ‘커' : 높이를 다루는 ‘커'

  

![](./10cc5e37-40fc-4ed1-b850-7d9ce78f2bcd.jpg)  

![](./7ecf7359-3e87-42f5-a6e8-80bfc8711e91.jpg)  

이 세 가지가 모두 같은 의미표현임을 정규화.

  

의미론 측에서는 적합, 화용론 측면에서는 부족.

- 화용론

![](./e782d49f-d8bb-4e2d-99a0-2901c6d077de.jpg)  

![](./5059dcdf-d016-4b72-ab83-eda16c87f208.jpg)  

  

1. 노래 목록을 열람하는 중 다음 노래에 커서가 가도록 함.
2. 노래 재생 중 다음 플레이리스트 곡을 재생하도록 함.

  

  

  

### 합성성

![](./77af18b8-9cd0-417f-ac43-203e83b97657.jpg)  

  

  

### 비합성성

![](./77af73e6-532f-4d4a-95de-603a67dba6c0.jpg)  

  

  

### 생략

![](./eae6d73d-d6c6-4d8d-851e-476cdae3d29e.jpg)  

  

  

### Challenge : 모호성, 불확실성

![](./916b9997-9f3b-4580-a5cd-4f0e0197e3bb.jpg)  

  

### 요약

![](./80f03b36-bb61-4294-ab8d-29d813a3602c.jpg)  

  

  

## 3강 의미 이해 방법 Semantics

### Distributional semantics

![](./55e6a613-b27d-430f-98a5-a2e929121d95.jpg)  

백두산 → mountain으로 인식

  

→ ‘백두산’ 이라는 영화가 나왔을 경우

![](./05db44eb-bde1-49a0-9712-2d27dada1e1a.jpg)  

백두산 → mountain/film으로 인식

이러한 경우 구분을 해야 한다.

  

![](./2d584b03-6d17-42cc-9a58-603d3f446bef.jpg)  

 ![](./cd13f98a-7a07-4d93-8db3-6dc228e8113a.jpg)

백두산이 산으로 쓰이는 경우, 백두산이 영화제목으로 쓰이는 경우

  

  

![](./0f40f5a3-8550-4628-abbb-6796723a6744.jpg)  

모호성이 없는 경우

  

  

  

  

  

![](./8cd36479-d77d-4e42-8c38-8c0072025b02.jpg)  

  

![](./7b7f9c8f-7e0a-4dd3-8349-8fdd83e196db.jpg)  

  

  

###  분류와 문맥 단어 간의 맥트릭스를 기계에 전달

![](./f91e95ea-4af1-44b1-b3af-6ca554f714bf.jpg)  

![](./c51346c6-076b-4805-97e1-03a9dcc47ae0.jpg)  

‘높이가 몇 미터지'를 벡터로 변환한 다음 cos 유사도 검사 진행. mountain과 더 유사함을 확인하고 mountain으로 분류.

  

  

![](./93b4e937-1499-4560-968b-3e44518dbf01.jpg)  

  

  

### 단어 간 거리 시각화 (FastText)

![](./2740e563-f10d-44bf-8ef6-f0e46da1f131.jpg)  

‘공유’ 라는 단어는 영화말고도 많이 쓰여서 분리된 거로 보임.

  

  

![](./d21744e6-a350-4326-b626-fb24d33ef270.jpg)배우와 영화 캐릭터간의 구분  

  

  

  

기계가 사람의 말을 이해하기에 충분한가?

![](./94368431-c18b-4bfb-8596-f40b8d15a2f0.jpg)  

Distributional semantics를 통해 백두산 단어 하나를 이해했지만 전체 문장을 이해하는 데에는 부족. ‘높이'와 같이 전체 문장을 이해하는 방법.

  

\->

### Frame semantics

정형적인 상황을 표현하는 프레임으로 의미를 표현 

![](./e639b618-ab99-4a3f-9696-55747c65fa3c.jpg)  

  

![](./1e1d9968-d061-482f-845c-a56e6082db1f.jpg)  

Semantic role labeling : 평서문을 대상으로 함. 문장을 분석했을 때, 문장에 나오는 어떤 대상의 entity와 값이 있을 때, 그 값이 어떤 관계를 갖는 지를 labeling한다.

→ height : 백두산과 2750m를 이어주는 의미.

  

  

  

![](./eb317eaa-1684-4950-8f66-9cfa76e004d1.jpg)  

  

  

![](./905865fa-fab6-4221-991b-c2edc2b6b15c.jpg)  

‘가장', ‘보다 높은’ 합성성을 지닌 문장의 경우

  

→

  

### Formal semantics

Language as programs. 문장을 프로그램으로 봄. 그리고 그 프로그램을 찾음.

![](./21bd230c-c7b8-4d3f-9f79-6174dadad945.jpg)  

  

 ![](./542f046d-450f-41f1-8683-29410c5e544e.jpg)

![](./a392f711-aa88-4ce5-91a7-4447a5112cb9.jpg)semantic parsing   

  

  

![](./87ffb900-1963-4c9e-8d88-0341c1767ecb.jpg)  

합성성의 특성을 활용해서 분석.

  

  

![](./3de6558f-68c6-4d3a-a22b-c131744e4921.jpg)  

딥러닝 분야의 활용.

  

  

### 요약

![](./ac1f0537-87f6-4563-bd36-a666a8d5bfb7.jpg)  

  

  

  

## 4강 자연어 이해(NLU) 기술 상용화 이해

![](./4981ab83-be56-437e-b973-185266a282cc.jpg)  

![](./b38fd217-5d57-448a-8518-306f07f9ff71.jpg)  

  

  

### Frame semantics기반의 상용 자연어 이해 기술

![](./efa7bb6b-b180-4350-823f-ddd30e183580.jpg)  

  

  

![](./59a95f6a-9cf7-4995-a1cc-6fe167859f10.jpg)  

![](./bf97b480-a40b-4e9a-869c-5fd4e892c7ef.jpg)  

  

### 도메인 분류

NUGU의 서비스 도메인 확장

![](./7d491227-4293-46bc-96a4-b4543b2ff4e1.jpg)  

  

![](./5ffa2dc7-d827-4de9-9403-3a62f19137c4.jpg)  

도메인은 결국 분류의 문제.

  

  

입력된 문장을 분류하기 위해서 feature을 정리.

![](./17d23900-b93a-4d22-8632-c094c7c6ede7.jpg)  

1\. BOW

원래 있던 문장에서 가방안의 단어 뭉치로 치환. → 정보 손실 발생: 순서 정보가 날라간 단어의 집합이 됨.  

단어의 빈도수 체크

  

![](./aae1e98e-46b6-4b83-b06d-cf6ce043f16d.jpg)  

2\. N-grams

선우 관계(순서 정보)손실을 막는 방법. 

  

unigram : 단일 단어

bigram : 두 연속 단어

trigram : 세 연속 단어

  

  

![](./f4946dd9-ba35-4de9-97fe-ff02955ec368.jpg)  

가장 적합한 분류기 선택

→ 성능, 속도, 오분석 고치기 (딥러닝을 포함한 기계학습 모델은 오분석 고치기가 힘들다. 올바른 데이터를 더 집어넣어서 학습시켜야 함. 반대로 규칙기반은 수정에 용이)

  

### 개체명 인식

![](./6bc6306a-2c14-48c1-9eec-47482ad694cf.jpg)  

  

  

첫 번째로 사전의 관점

![](./cdd1d894-82ca-4df0-ad54-c5ae1796edec.jpg)  

사전은 기존 사전 db를 가지고 있는 업체와 계약. → 정제 작업도 필요.

사전만으로는 충분하지 않다. 아직 정의되지 않은 단어도 있다.

  

  

두 번째로 Distributional semantics의 관점

![](./4c6b2cfc-b09e-452d-ab98-ea774054cc7f.jpg)  

Q2-2 : 문장이 아니라, 노래제목만 덩그러니 들어오는 경우. 

  

  

![](./a0df04b0-ae5b-4feb-8deb-704e99573e6e.jpg)  

  

![](./e9f76ce5-c151-4d17-b088-d2153a6cd6b2.jpg)  

개체명을 찾는 방법 : 문장에서 해당 entity를 표시해주는 tag를 붙임.

BIO Tagging

B: 시작단어

I : B-tag 다음에 오는 단어

O : entity에 해당하지 않음.

  

![](./1016c64d-9ad4-4835-b2db-4cd77cbfe8e9.jpg)  

  

### 의도 식별

![](./de74f0e6-9867-44f1-9148-42d0008d2d67.jpg)  

문장에 드러나는 패턴을 분석해서 규칙으로 품.  

  

  

![](./b78eac22-9319-4b49-8b09-9c74cf01787e.jpg)  

  

![](./6361ed9d-abce-40a0-8b26-e6f940522756.jpg)  

1. 개체명이 의도 식별에 도움이 된다.
2. 조사나 어미에 의해 다양하게 표현이 되는 경우가 있다. 

  

  

### 도메인 NLU 모델 설계

![](./9be8d4b3-22c9-40c3-b071-d7b1d6862bb2.jpg)  

1. A안 : 전부다 intent로 표현
2. B안 : entity로 기기를 잡음
3. C안 : 각 기기를 entity에서도 표현

  

B안이 좀 더 General하게 쓰기 좋아 보인다.

  

  

![](./ec0506b1-e817-4215-a736-97441f9244d1.jpg)  

처음에 받은 요구에만 딱 맞게 모델링하기 보다는, 향후 어떤 요청이 들어올지 고민을 하면서 모델링을 해야 한다.

  

  

## 5강 NLU 상용화 주요 이슈

  

### 주요 이슈 : Noise

![](./3b88bcd0-e7a0-4b17-8122-759f96bdd841.jpg)  

띄어쓰기 생략 (형태소 분석에 오류), 

영어(한국어)표기일 경우 사전에 등록되어 있지 않을 수도 있다. 

  

대안 → 

음성인식 기술 향상.

사전이 빠르게 대응하여 한/영 표기 모두 등록

  

### 주요 이슈 : Ambiguity

![](./b8a7f588-9234-43f2-b83c-5084dac5f112.jpg)  

‘아이유 찾아줘'만 듣고 셋 중에서 판단을 할 수 있는가? 사실 사람도 판단하기 어렵다.

  

→ 디바이스 정보를 보는 것도 하나의 방법.

어떤 기계를 사용 중인 상태에서 불렀는지, 어떤 프로그램을 사용 중인 상태에서 불렀는지.

  

단순히 문장정보로는 해결하기 어렵다.

  

  

### 주요 이슈 : Data

![](./4d941012-a509-43e2-8961-aa4e137e4c97.jpg)  

사용자의 의도가 담긴 발화 패턴이 기계가 예상하는 발화 패턴과 다른 경우

ex) ‘노래 틀어줘’라고 나는 흔히 말하는데, 서비스는 ‘음악 틀어줘'일 경우만 작동.  || 사투리 사용

→ 테스트를 하면서 다양한 표현을 찾는 게 답.

![](./7e2ca976-757b-4673-9b86-40bab40d6e3d.jpg)  

  

  

### 주요 이슈 : Rejection

![](./0dd4516f-9b3c-41be-870a-1d75c8b94320.jpg)

컴퓨터는 빠르게 ‘나는 이걸 몰라'라고 말하는 것을 잘 못한다.

모르는 것을 물으면 계속 찾기에 오래 걸린다.

→ 서비스 대상으로 삼지 않는 것을 아니라고 이야기 하기가 어렵다.

시스템이 서비스대상으로 하는 영역과 실제 시스템 출력은 다를 수 있다. 

  

사용자 발화와 서비스 대상발화가 아님에도 시스템이 정상적으로 reject하지 못하고 정상 분석 하는 경우가 문제이다.

아마 이 영역이 꽤 클 것으로 보인다. 

→ 아마 많은 서비스가 NLU는 정상출력이라고 보지만, 시스템이 서비스 불가능한 영역이라서 불가능하다고 표현할 것으로 본다.

  

  

  

## 6강 NLU 서비스 고도화 사례

![](./c77e9584-9ddd-4c3e-9e98-cb227ef8a643.jpg)  

### semantic parsing

![](./a3f63145-82cd-4173-9780-e022baba234a.jpg)  

현재 누구백과 서비스는 속성값을 기준으로하는 질문을 받지는 않음. → 되면 좋을 듯

응답 컨텐츠를 어떻게 보여줄 지도 고민을 해야 함. ex) 스피커로 김치찌개 만드는 방법을 어떻게 보여주나

  

  

![](./a6bda6b7-6409-4ecf-b967-cf102a16ac73.jpg)  

KB : knowledge base 잘 정제된 데이터베이스

  

+) 여담 : 사람들이 ai에 많이 묻는 정보로 ‘생일'이 있다. 다른 사람의 신상정보에 관심이 많은 듯 하다.

  

  

  

![](./6ed1dace-9ddb-4f77-9697-b59b7e08c70a.jpg)  

KB를 통해서 만들 수 있는 질문이 너무 방대해서, 이 중에서 어떤 질문 유형에 집중해서 개발할지 정할 필요가 있었음. 그래서 조사를 함.

  

![](./78d2cd12-8394-4056-b547-44dfcb13a2cf.jpg)  

1. 객체명 인식
2. 분류문제
3. 객체와 분류를 align 

  

  

  

![](./6bb10cdf-3bb9-40c2-986c-30c0dbd57b07.jpg)  

  

![](./3c763284-4cec-4113-bb53-87f77b0ed2fa.jpg)  

주어진 kb를 이용해서 답을 할 수 있는 formal query template을 제작. template 자체는 일반인이 보기에 이해하기 어려우므로, 일반인이 이해하기 쉽도록 자연어 Paraphrasing(문장과 동일한 의미에 다른 표현을 만듦)한다.  

데이터 구축 → 엔진 생성

  

  

![](./a4493286-8dcb-4c07-9201-78420cd98c58.jpg)  

데이터 구축을 통해 만들어진 엔진이 잘 분석하는 지 테스트. 

1. n-best 출력을 테스터에게 보임.
2. 정답일 경우 마킹.

  

![](./4a622b9d-a828-4275-9c4e-303b84063044.jpg)  

  

  

![](./d4eae1fd-7abc-4d07-a5d9-cebfb1a99393.jpg)  

  

  

  

![](./6fec3b54-e3d4-4c73-b0c3-9f4a311ee404.jpg)  

1. 객체명 인식
2. DCS(formal한 query를 표현하는 language)를 활용한 chart parsing. formal query language의 후보군 만들기.
3. 그 결과를 입력을해서 ranking을 함. (머신러닝 방법론 적용)

  

  

  

![](./aa48e4d4-2807-4d7d-9db8-15f67d136a5c.jpg)  

규칙 1. 사전 : 각 단어를 사전에 따라 분류

규칙 2. 결합 : 결합이 가능한 타입끼리 결합. (REL-LOC은 COUNTRY라는 entity타입과 결합할 수 있다는 결합규칙이 필요)

unary : 표현 자체가 category에 해당한다는 의미. (REL-TYPE(산) = 그 카테고리 이름이 산)

  

  

‘에서’가 REL-ROC이 아닐 수도 있다.

‘백두산’이 영화 분류일 수도 있다.

‘보다 높은'이 높이(PRO=HEIGHT 말고 다르게 쓰일 수도 있다.

이렇듯 chart parsing을 통해서 formal 표현( “ (more(and (REL-TYPE .... ) “ ) 을 여러 개 만들 수 있는데, 이 중에서 가장 적합한 것을 찾는 것이 ‘Ranking’ 과정에서 이루어진다.

  

  

KB의 모습 (잘 정리된 데이터베이스, 개념-개념간의 관계-속성으로 정의)

![](./af6a3adc-e6a3-44f2-ac11-a24bd7673f08.jpg)  

  

어떤 것들이 표현되어 있는 지 정의하는 것을 ‘스키마’라고 함.

![](./48ba882b-0138-4c6e-b4bc-89f6692d4c71.jpg)  

  

  

  

  

  

  

 ![](./644a3d36-f0f2-41cc-abda-2b4210761fce.jpg)![](./7f52aaca-433b-4868-a257-ca27755b18a2.jpg)

![](./6b6b05b7-3e8d-48af-bd26-952cd9684d13.jpg)  

  

  

  

### 단일 조건 질의문

![](./15f6b435-740d-4560-9e5f-9fdeb03e30cf.jpg)  

  

![](./e5ac11fe-d2c9-4ac1-bf16-01a2dfe7f12c.jpg)  

  

![](./ab593715-348d-4804-a15c-893bc1d0d818.jpg)  

  

![](./f64a565f-d749-4cdf-89c9-5417f6fd6475.jpg)  

  

![](./c1ed8a7e-3413-45b3-9885-05b0ea83b485.jpg)  

chart parsing을 통해서 parsing된 결과.

  

  

![](./8c6ec251-9028-46f1-b02e-ba22a0cddacb.jpg)  

많은 후보군을 Ranking함.

Ranking 자질(feature)에 대한 weight 정보를 보여줌.

  

  

### 복합 조건 질의문

![](./933511a5-eead-4c5f-b020-62e7f8d015e8.jpg)  

![](./a0fda367-c23f-418d-92db-5289d1049631.jpg)  

  

### 통합 도메인 (음악의 도메인과 TV의 도메인을 연결하기) : entity linking

![](./48e471b9-b26b-4ad4-8b88-d9ffdea5de05.jpg)  

tv도메인에서 소녀시대 소속 멤버를 찾으면 엉뚱한 대답을 한다.

  

원인:

![](./1d55d788-47fb-471d-81f0-904ee5129ded.jpg)  

  

  

해결: same as로 엮기

db는 다르지만 같은 entity로 연결.

![](./a673d41b-3416-42f9-9bcd-3e50077b13a7.jpg)  

![](./09565946-0726-43ac-8d28-41e865d9eaea.jpg)  

  

  

![](./7a98e52b-cbc4-4ef3-b828-49528a569c48.jpg)  

  

결과:

![](./a0a0c375-3a3f-43b0-8f30-4573c464e258.jpg)  

소녀시대 소속 멤버 - 음악db

방송 - tv

  

  

### Rejection

Rejection은 NLU 사용 접근에서 어려운 문제 중 하나.

  

![](./2ab12929-60ca-4819-b716-5bb98d48048e.jpg)  

Rejection은 도메인 분류 단계에서 할 수 있다.
